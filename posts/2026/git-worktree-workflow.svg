<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4CAF50;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#2196F3;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3" />
      <feOffset dx="2" dy="2" result="offsetblur" />
      <feFlood flood-color="#000000" flood-opacity="0.3" />
      <feComposite in2="offsetblur" operator="in" />
      <feMerge>
        <feMergeNode />
        <feMergeNode in="SourceGraphic" />
      </feMerge>
    </filter>
  </defs>

  <style>
    .title { font: bold 24px sans-serif; fill: #333; }
    .subtitle { font: 16px sans-serif; fill: #666; }
    .node { stroke: #333; stroke-width: 2px; }
    .main-repo { fill: #4CAF50; }
    .worktree { fill: #2196F3; }
    .shared { fill: #FF9800; }
    .process { fill: #9C27B0; }
    .arrow { stroke: #333; stroke-width: 2; marker-end: url(#arrowhead); }
    .text { font: 14px sans-serif; fill: #333; }
    .highlight { stroke: #FF5722; stroke-width: 3; }
  </style>

  <!-- Arrow marker -->
  <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
    <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
  </marker>

  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="title">Git Worktree 工作流程</text>
  <text x="400" y="50" text-anchor="middle" class="subtitle">并行开发环境架构示意图</text>

  <!-- Main Repository -->
  <rect x="50" y="100" width="200" height="80" rx="10" class="node main-repo" filter="url(#shadow)" />
  <text x="150" y="125" text-anchor="middle" class="text">主Git仓库</text>
  <text x="150" y="145" text-anchor="middle" class="text">.git/</text>

  <!-- Shared Resources -->
  <rect x="300" y="100" width="150" height="60" rx="8" class="node shared" />
  <text x="375" y="125" text-anchor="middle" class="text">共享对象数据库</text>
  <text x="375" y="145" text-anchor="middle" class="text">objects/</text>

  <rect x="300" y="180" width="150" height="60" rx="8" class="node shared" />
  <text x="375" y="205" text-anchor="middle" class="text">共享引用数据</text>
  <text x="375" y="225" text-anchor="middle" class="text">refs/</text>

  <!-- Worktree Management -->
  <rect x="500" y="100" width="200" height="60" rx="8" class="node" fill="#E91E63" />
  <text x="600" y="125" text-anchor="middle" class="text">工作树管理</text>
  <text x="600" y="145" text-anchor="middle" class="text">.git/worktrees/</text>

  <!-- Worktrees -->
  <rect x="500" y="200" width="180" height="50" rx="6" class="node worktree" />
  <text x="590" y="225" text-anchor="middle" class="text">工作树A</text>
  <text x="590" y="245" text-anchor="middle" class="text">(feature/login)</text>

  <rect x="500" y="270" width="180" height="50" rx="6" class="node worktree" />
  <text x="590" y="295" text-anchor="middle" class="text">工作树B</text>
  <text x="590" y="315" text-anchor="middle" class="text">(bugfix/header)</text>

  <rect x="500" y="340" width="180" height="50" rx="6" class="node worktree" />
  <text x="590" y="365" text-anchor="middle" class="text">工作树C</text>
  <text x="590" y="385" text-anchor="middle" class="text">(hotfix/security)</text>

  <!-- Work Directories -->
  <rect x="500" y="450" width="180" height="50" rx="6" class="node" fill="#673AB7" />
  <text x="590" y="475" text-anchor="middle" class="text">工作目录A</text>
  <text x="590" y="495" text-anchor="middle" class="text">../feature-login/</text>

  <rect x="300" y="450" width="180" height="50" rx="6" class="node" fill="#673AB7" />
  <text x="390" y="475" text-anchor="middle" class="text">工作目录B</text>
  <text x="390" y="495" text-anchor="middle" class="text">../bugfix-header/</text>

  <rect x="100" y="450" width="180" height="50" rx="6" class="node" fill="#673AB7" />
  <text x="190" y="475" text-anchor="middle" class="text">工作目录C</text>
  <text x="190" y="495" text-anchor="middle" class="text">../hotfix-security/</text>

  <!-- Process Boxes -->
  <rect x="700" y="200" width="80" height="40" rx="5" class="node process" />
  <text x="740" y="225" text-anchor="middle" class="text">开发</text>
  <text x="740" y="245" text-anchor="middle" class="text">测试</text>

  <rect x="700" y="270" width="80" height="40" rx="5" class="node process" />
  <text x="740" y="295" text-anchor="middle" class="text">调试</text>
  <text x="740" y="315" text-anchor="middle" class="text">提交</text>

  <rect x="700" y="340" width="80" height="40" rx="5" class="node process" />
  <text x="740" y="365" text-anchor="middle" class="text">审查</text>
  <text x="740" y="385" text-anchor="middle" class="text">部署</text>

  <!-- Connections -->
  <line x1="250" y1="140" x2="300" y2="130" class="arrow" />
  <line x1="250" y1="140" x2="300" y2="190" class="arrow" />

  <line x1="450" y1="130" x2="500" y2="130" class="arrow" />
  <line x1="450" y1="190" x2="500" y2="130" class="arrow" />

  <line x1="590" y1="250" x2="590" y2="450" class="arrow" />
  <line x1="500" y1="295" x2="300" y2="475" class="arrow" stroke-dasharray="5,5" />
  <line x1="500" y1="365" x2="100" y2="475" class="arrow" stroke-dasharray="5,5" />

  <line x1="680" y1="220" x2="700" y2="220" class="arrow" />
  <line x1="680" y1="290" x2="700" y2="290" class="arrow" />
  <line x1="680" y1="360" x2="700" y2="360" class="arrow" />

  <!-- Legend -->
  <rect x="600" y="520" width="15" height="15" class="node main-repo" />
  <text x="620" y="532" class="text">主仓库</text>

  <rect x="680" y="520" width="15" height="15" class="node shared" />
  <text x="700" y="532" class="text">共享资源</text>

  <rect x="600" y="545" width="15" height="15" class="node worktree" />
  <text x="620" y="557" class="text">工作树</text>

  <rect x="680" y="545" width="15" height="15" class="node" fill="#673AB7" />
  <text x="700" y="557" class="text">工作目录</text>

  <rect x="600" y="570" width="15" height="15" class="node process" />
  <text x="620" y="582" class="text">开发流程</text>

  <!-- Highlight current flow -->
  <path d="M250,140 L300,130 L450,130 L500,130 L590,130 L590,200 L590,250 L590,450 L500,475 L300,475"
        class="highlight" fill="none" stroke-dasharray="5,5" opacity="0.7" />
</svg>